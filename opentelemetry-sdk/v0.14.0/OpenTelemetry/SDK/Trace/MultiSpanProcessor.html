<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: OpenTelemetry::SDK::Trace::MultiSpanProcessor
  
    &mdash; OpenTelemetry
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "OpenTelemetry::SDK::Trace::MultiSpanProcessor";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../OpenTelemetry.html" title="OpenTelemetry (module)">OpenTelemetry</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../SDK.html" title="OpenTelemetry::SDK (module)">SDK</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Trace.html" title="OpenTelemetry::SDK::Trace (module)">Trace</a></span></span>
     &raquo; 
    <span class="title">MultiSpanProcessor</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: OpenTelemetry::SDK::Trace::MultiSpanProcessor
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">OpenTelemetry::SDK::Trace::MultiSpanProcessor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/opentelemetry/sdk/trace/multi_span_processor.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Implementation of the SpanProcessor duck type that simply forwards all received events to a list of SpanProcessors.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#force_flush-instance_method" title="#force_flush (instance method)">#<strong>force_flush</strong>(timeout: nil)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Export all ended spans to the configured <code>Exporter</code> that have not yet been exported.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(span_processors)  &#x21d2; MultiSpanProcessor </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new <span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::MultiSpanProcessor (class)">MultiSpanProcessor</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_finish-instance_method" title="#on_finish (instance method)">#<strong>on_finish</strong>(span)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when a <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is ended, if the <span class='object_link'><a href="Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_start-instance_method" title="#on_start (instance method)">#<strong>on_start</strong>(span, parent_context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when a <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is started, if the <span class='object_link'><a href="Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">#<strong>shutdown</strong>(timeout: nil)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Called when <span class='object_link'><a href="TracerProvider.html#shutdown-instance_method" title="OpenTelemetry::SDK::Trace::TracerProvider#shutdown (method)">TracerProvider#shutdown</a></span> is called.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(span_processors)  &#x21d2; <tt><span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::MultiSpanProcessor (class)">MultiSpanProcessor</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new <span class='object_link'><a href="" title="OpenTelemetry::SDK::Trace::MultiSpanProcessor (class)">OpenTelemetry::SDK::Trace::MultiSpanProcessor</a></span>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span_processors</span>
      
      
        <span class='type'>(<tt>Enumerable&lt;SpanProcessor&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a collection of SpanProcessors.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/multi_span_processor.rb', line 18</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_span_processors'>span_processors</span><span class='rparen'>)</span>
  <span class='ivar'>@span_processors</span> <span class='op'>=</span> <span class='id identifier rubyid_span_processors'>span_processors</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="force_flush-instance_method">
  
    #<strong>force_flush</strong>(timeout: nil)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Export all ended spans to the configured <code>Exporter</code> that have not yet been exported.</p>

<p>This method should only be called in cases where it is absolutely necessary, such as when using some FaaS providers that may suspend the process after an invocation, but before the <code>Processor</code> exports the completed spans.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>optional Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional timeout in seconds.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Export::SUCCESS if no error occurred, Export::FAILURE if a non-specific failure occurred, Export::TIMEOUT if a timeout occurred.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/multi_span_processor.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_force_flush'>force_flush</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@span_processors</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_processor'>processor</span><span class='op'>|</span>
    <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../OpenTelemetry.html" title="OpenTelemetry (module)">OpenTelemetry</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Utilities</span><span class='period'>.</span><span class='id identifier rubyid_maybe_timeout'>maybe_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="Export.html" title="OpenTelemetry::SDK::Trace::Export (module)">Export</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Export.html#TIMEOUT-constant" title="OpenTelemetry::SDK::Trace::Export::TIMEOUT (constant)">TIMEOUT</a></span></span> <span class='kw'>if</span> <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span><span class='op'>&amp;.</span><span class='id identifier rubyid_zero?'>zero?</span>

    <span class='id identifier rubyid_processor'>processor</span><span class='period'>.</span><span class='id identifier rubyid_force_flush'>force_flush</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_finish-instance_method">
  
    #<strong>on_finish</strong>(span)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when a <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is ended, if the <span class='object_link'><a href="Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>

<p>This method is called synchronously on the execution thread, should not throw or block the execution thread.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> that just ended.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/multi_span_processor.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_finish'>on_finish</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='rparen'>)</span>
  <span class='ivar'>@span_processors</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_processor'>processor</span><span class='op'>|</span> <span class='id identifier rubyid_processor'>processor</span><span class='period'>.</span><span class='id identifier rubyid_on_finish'>on_finish</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_start-instance_method">
  
    #<strong>on_start</strong>(span, parent_context)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when a <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> is started, if the <span class='object_link'><a href="Span.html#recording%3F-instance_method" title="OpenTelemetry::SDK::Trace::Span#recording? (method)">Span#recording?</a></span> returns true.</p>

<p>This method is called synchronously on the execution thread, should not throw or block the execution thread.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>span</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the <span class='object_link'><a href="Span.html" title="OpenTelemetry::SDK::Trace::Span (class)">Span</a></span> that just started.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>parent_context</span>
      
      
        <span class='type'>(<tt>Context</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the parent Context of the newly started span.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/multi_span_processor.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_start'>on_start</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_context'>parent_context</span><span class='rparen'>)</span>
  <span class='ivar'>@span_processors</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_processor'>processor</span><span class='op'>|</span> <span class='id identifier rubyid_processor'>processor</span><span class='period'>.</span><span class='id identifier rubyid_on_start'>on_start</span><span class='lparen'>(</span><span class='id identifier rubyid_span'>span</span><span class='comma'>,</span> <span class='id identifier rubyid_parent_context'>parent_context</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown-instance_method">
  
    #<strong>shutdown</strong>(timeout: nil)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Called when <span class='object_link'><a href="TracerProvider.html#shutdown-instance_method" title="OpenTelemetry::SDK::Trace::TracerProvider#shutdown (method)">TracerProvider#shutdown</a></span> is called.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>optional Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>An optional timeout in seconds.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Export::SUCCESS if no error occurred, Export::FAILURE if a non-specific failure occurred, Export::TIMEOUT if a timeout occurred.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/opentelemetry/sdk/trace/multi_span_processor.rb', line 73</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shutdown'>shutdown</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_start_time'>start_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>
  <span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='ivar'>@span_processors</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_processor'>processor</span><span class='op'>|</span>
    <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../OpenTelemetry.html" title="OpenTelemetry (module)">OpenTelemetry</a></span></span><span class='op'>::</span><span class='const'>Common</span><span class='op'>::</span><span class='const'>Utilities</span><span class='period'>.</span><span class='id identifier rubyid_maybe_timeout'>maybe_timeout</span><span class='lparen'>(</span><span class='id identifier rubyid_timeout'>timeout</span><span class='comma'>,</span> <span class='id identifier rubyid_start_time'>start_time</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='const'><span class='object_link'><a href="Export.html" title="OpenTelemetry::SDK::Trace::Export (module)">Export</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Export.html#TIMEOUT-constant" title="OpenTelemetry::SDK::Trace::Export::TIMEOUT (constant)">TIMEOUT</a></span></span> <span class='kw'>if</span> <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span><span class='op'>&amp;.</span><span class='id identifier rubyid_zero?'>zero?</span>

    <span class='id identifier rubyid_processor'>processor</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span><span class='lparen'>(</span><span class='label'>timeout:</span> <span class='id identifier rubyid_remaining_timeout'>remaining_timeout</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_results'>results</span><span class='period'>.</span><span class='id identifier rubyid_uniq'>uniq</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Feb  3 18:49:35 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>